---
import "@styles/global.css";
import AdminPanelLayout from "@layouts/AdminPanelLayout.astro";
import PanelAdminView from "@views/admin/panel_admin_view.astro";
import PlayersProfessorView from "@views/profesor/jugadores_profesor_view.astro";
import NotAuthorized from "@components/shared/NotAuthorized.astro";
import { roles } from "@consts/roles";

const user = Astro.cookies.get("user")
  ? (JSON.parse(Astro.cookies.get("user")?.value as string) as LoggedUser)
  : null;
const { super: superRole } = roles;

---

<AdminPanelLayout title="Panel de AdministraciÃ³n">
  {
    !user ? (
      <NotAuthorized/>
    ) : user?.rol === superRole ? (
      <PanelAdminView />
    ) : (
      <PlayersProfessorView />
    )
  }
</AdminPanelLayout>
